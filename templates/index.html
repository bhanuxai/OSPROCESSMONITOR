<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Real-Time Process Monitoring Dashboard</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="app-container">

    <!-- HEADER -->
    <header class="header glass">
      <div>
        <h1>‚öôÔ∏è OS Process Monitor</h1>
        <p class="subtitle">Real-time system & process dashboard</p>
      </div>
      <div class="header-right">
        <div class="pill pill-green"><span class="dot"></span><span>LIVE</span></div>
        <span id="current-time" class="time-text"></span>
      </div>
    </header>

    <!-- TABS -->
    <nav class="tabs glass">
      <button class="tab-btn active" data-tab="overview">üìä Overview</button>
      <button class="tab-btn" data-tab="processes">üß™ Processes</button>
      <button class="tab-btn" data-tab="controlPanel">üõ† Control Panel</button>
    </nav>

    <!-- OVERVIEW -->
    <section id="tab-overview" class="tab-page active">

      <!-- SYSTEM INFO CARDS -->
      <section class="cards">
        <div class="card glass"><h2>OS</h2><p class="value" id="sys-os">--</p></div>
        <div class="card glass"><h2>CPU Model</h2><p class="value" id="sys-cpu">--</p></div>
        <div class="card glass"><h2>Total RAM</h2><p class="value" id="sys-ram">--</p></div>
        <div class="card glass"><h2>Uptime</h2><p class="value" id="sys-uptime">--</p></div>
      </section>

      <!-- USAGE CARDS -->
      <section class="cards">
        <div class="card glass">
          <h2>CPU Usage</h2>
          <p class="value" id="cpu-value">--%</p>
          <div class="meter"><div id="cpu-meter-fill" class="meter-fill"></div></div>
        </div>
        <div class="card glass">
          <h2>Memory Usage</h2>
          <p class="value" id="mem-value">--%</p>
          <div class="meter"><div id="mem-meter-fill" class="meter-fill"></div></div>
        </div>
        <div class="card glass">
          <h2>Disk Usage</h2>
          <p class="value" id="disk-value">--%</p>
          <div class="meter"><div id="disk-meter-fill" class="meter-fill"></div></div>
        </div>
      </section>

      <!-- CHARTS -->
      <section class="charts">
        <div class="chart-card glass">
          <h3>CPU & Memory History</h3>
          <canvas id="cpuMemChart"></canvas>
        </div>
        <div class="chart-card glass">
          <h3>Per Core CPU Usage</h3>
          <canvas id="perCoreChart"></canvas>
        </div>
      </section>
    </section>

    <!-- PROCESSES TAB -->
    <section id="tab-processes" class="tab-page">
      <div class="table-section glass">

        <!-- AUTO REFRESH TOGGLE -->
        <div style="margin-bottom: 10px;">
          <label>
            <input type="checkbox" id="autoRefreshToggle" checked>
            Auto Refresh (every 2s)
          </label>
        </div>

        <div class="table-header">
          <h2>Top Processes</h2>
          <div class="table-controls">
            <input type="text" id="process-search" placeholder="Search by name or PID..." />
          </div>
        </div>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th data-sort="pid">PID ‚ñ≤‚ñº</th>
                <th data-sort="name">Name ‚ñ≤‚ñº</th>
                <th data-sort="cpu">CPU % ‚ñ≤‚ñº</th>
                <th data-sort="memory">Memory % ‚ñ≤‚ñº</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="process-tbody"></tbody>
          </table>
        </div>

        <!-- PAGINATION -->
        <div class="pagination">
          <button id="prevBtn">‚¨Ö Prev</button>
          <span id="pageInfo"></span>
          <button id="nextBtn">Next ‚û°</button>
        </div>

        <p class="hint">* Updates every 2 seconds.</p>
      </div>
    </section>

    <!-- CONTROL PANEL -->
    <section id="tab-controlPanel" class="tab-page">
      <h2>Control Panel</h2>
      <div class="control-buttons">
        <button class="cp-btn danger" onclick="shutdownPC()">Shutdown</button>
        <button class="cp-btn warning" onclick="restartPC()">Restart</button>
        <button class="cp-btn" onclick="logoffPC()">Logoff</button>
      </div>
      <p class="hint">‚ö†Ô∏è Do not press during presentation üòÖ</p>
    </section>

  </div>

  <!-- TOAST -->
  <div id="toast-container"></div>

  <!-- MODAL -->
  <div id="modal-overlay" class="modal-overlay">
    <div class="modal glass">
      <h2>Kill Process?</h2>
      <p id="modal-text"></p>
      <div class="modal-buttons">
        <button id="confirmKill" class="cp-btn danger">Kill</button>
        <button id="cancelKill" class="cp-btn">Cancel</button>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
